## 1.项目架构

问：项目架构展示一下？

答：没有做架构图，但是数据库有用powerdesign设计数据库的架构图，后端是MVC架构

建议：做项目的同时要绘制项目的整体架构图，帮助理解项目的工作流程与原理，也有利于展示

## 2.性能优化

问：性能优化为什么只优化了getWorks这一个接口，其他的接口都没有优化？

答：助教之前跟我们讲可以选择最主要的接口进行优化，所以我们选择了getworks这个最主要的访问接口进行优化，还有两个接口已经达标，login这个接口由于已经使用了索引，所以选择了getworks这个接口进行优化，优化方式有：数据库增加索引，springboot增加缓存以及优化sql查询的逻辑，然后1.4s到1s主要是因为加了缓存

问：数据库引擎有没有自己的优化？

答：没有，但是我们有给数据库里的Work加了索引，但是性能优化不强

问：为什么Work加索引没啥效果呢？

答：这个接口需要访问数据库中的很多属性进行判断，我们给title加了索引可以优先筛选掉一部分数据

问：那你们应该给每个判断的属性都要加索引啊，这样才有效果。

问：性能测试跑了多久？

答：表格第二行的数据

问：那是响应时间

答：5s或者10s（下来后查证为10s）

问：你们测试的数据量是多少？

答：100000条，任老师上课提过的要求

问：你们并发是怎么测试的？是每次申请一样的数据吗？

答：是的，每次都是取的第一页的数据

老师回复：难怪，每次都取一样的数据，缓存当然很有用啊，但是实际使用过程中，这样的请求都是随机的，那在这样的条件下，你们设置的缓存还有用吗？

答：确实，我们没有考虑到这个问题

问：后面两个接口为什么这么快？（指getfinishedwork和applywork）

答：因为getfinishedwork在执行sql语句的时候会先在一个小一点的表（do_work)先筛选掉很多数据，然后根据w_id（主键）再去work大表里面进行筛选，相当于sql语句上的优化

老师回复：那这就说明你们这个数据量没有达到100000条啊，那还有这个login为什么这么慢还没有优化呢

答：这个接口不是我们自己写的接口，这个接口这么慢的原因可能是springsecurity中验证用户登录的用户名和密码的问题。然后还有数据库建表的时候我们就已经给user的name属性加了unique的索引，所以感觉优化不了

问：你们有没有对这个现象有深入的探究？有没有监测到底是什么原因导致login的接口耗时这么长，你们找到了关键的耗时路径吗？

答：没有

回复：你们不做监测当然是不知道怎么优化啦，你们都不知道是哪有问题，哪能优化，这当然是不能优化的。

问：那你们的springsecurity做了啥？

答：我们用springsecurity做了权限的验证，以及对controller层的接口的保护

问：那比如对getworks你们用springsecurity做了啥？

答：这个接口是我们暴露出来的接口，所有人都能调用，但是对于getfinishedWorks我们有检测登录后前端传过来的u_id，看它是否与session中登录者的u_id是否相同，相同才能返回有效数据，然后对管理员暴露的接口还会检测登录者的user_type，看其是否是管理员







